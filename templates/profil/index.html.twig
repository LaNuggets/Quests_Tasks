{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
    <h1>Mon Profil</h1>

    {% for message in app.flashes('success') %}
        <div style="color: green;">{{ message }}</div>
    {% endfor %}

    {% for message in app.flashes('error') %}
        <div style="color: red;">{{ message }}</div>
    {% endfor %}

    <form method="post" enctype="multipart/form-data" data-turbo="false">
        {{ form_start(form) }}
        {{ form_widget(form) }}
        <button type="submit">Mettre à jour</button>
        {{ form_end(form) }}
    </form>

    {% if utilisateur.profilePicture %}
        <p>Photo actuelle :</p>
        <img src="{{ asset('uploads/photos/' ~ utilisateur.profilePicture) }}" alt="Photo de profil" width="150">
    {% else %}
        <p>Aucune photo de profil</p>
    {% endif %}

    <h2>Mon Groupe</h2>
    {% if groupe %}
        <p>Nom du groupe : {{ groupe.nom }}</p>
        <p>Score : {{ groupe.score }}</p>
    {% else %}
        <p>Vous n'êtes dans aucun groupe.</p>
    {% endif %}

    <h3>Mes Habitudes</h3>
    {% if habitudes is not empty %}
        <ul>
            {% for habitude in habitudes %}
                <li>
                {{ habitude.texte }} - Difficulté : {{ habitude.difficulte }}
                ({{ habitude.periodicite }})
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Aucune habitude enregistrée.</p>
    {% endif %}

    {% if utilisateur.groupe %}
    <h3>Ajouter un utilisateur au groupe {{ utilisateur.groupe.nom }}</h3>
<form method="get" action="{{ path('app_groupe_ajouter_utilisateur', { groupeId: utilisateur.groupe.id }) }}">
    <label for="pseudo">Pseudo de l'utilisateur :</label>
    <input type="text" name="pseudo" id="pseudo" required>
    <button type="submit">Ajouter</button>
</form>
{% else %}
    <p>L'utilisateur n'appartient à aucun groupe.</p>
{% endif %}

{% endblock %}